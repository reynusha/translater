<!DOCTYPE html>
<html lang="ru">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Telegram Translator</title>
    <script src="https://telegram.org/js/telegram-web-app.js"></script>
    <style>
        /* Telegram Font */
        @import url('https://fonts.googleapis.com/css2?family=Roboto:wght@400;500;700&display=swap');
        
        * {
            margin: 0;
            padding: 0;
            box-sizing: border-box;
        }
        
        body {
            font-family: 'Roboto', -apple-system, BlinkMacSystemFont, 'Segoe UI', sans-serif;
            background: var(--tg-theme-bg-color, #18222d);
            color: var(--tg-theme-text-color, #ffffff);
            height: 100vh;
            overflow: hidden;
        }
        
        :root {
            --tg-theme-bg-color: #18222d;
            --tg-theme-text-color: #ffffff;
            --tg-theme-hint-color: #7f8a96;
            --tg-theme-link-color: #5ac8fb;
            --tg-theme-button-color: #2ea6ff;
            --tg-theme-button-text-color: #ffffff;
            --tg-theme-secondary-bg-color: #1f2c3c;
            --tg-theme-header-bg-color: #1f2c3c;
            --tg-theme-section-bg-color: #1f2c3c;
            --tg-theme-section-header-text-color: #7f8a96;
        }
        
        .app {
            height: 100vh;
            display: flex;
            flex-direction: column;
            background: var(--tg-theme-bg-color);
        }
        
        /* Header - Telegram Style */
        .header {
            background: var(--tg-theme-header-bg-color);
            padding: 16px;
            border-bottom: 1px solid #2d3b4d;
            display: flex;
            align-items: center;
            gap: 12px;
        }
        
        .header-icon {
            width: 32px;
            height: 32px;
            background: var(--tg-theme-button-color);
            border-radius: 8px;
            display: flex;
            align-items: center;
            justify-content: center;
            font-size: 16px;
        }
        
        .header-title {
            font-size: 17px;
            font-weight: 500;
            color: var(--tg-theme-text-color);
        }
        
        /* Navigation */
        .tabs {
            display: flex;
            background: var(--tg-theme-secondary-bg-color);
            margin: 0 12px;
            border-radius: 12px;
            overflow: hidden;
        }
        
        .tab-btn {
            flex: 1;
            padding: 14px;
            background: none;
            border: none;
            color: var(--tg-theme-text-color);
            font-size: 14px;
            font-weight: 500;
            cursor: pointer;
            transition: all 0.2s ease;
        }
        
        .tab-btn.active {
            background: var(--tg-theme-button-color);
        }
        
        /* Content */
        .content {
            flex: 1;
            overflow-y: auto;
            padding: 16px 12px;
        }
        
        .tab-content {
            display: none;
        }
        
        .tab-content.active {
            display: block;
        }
        
        /* Translator Section */
        .translator-container {
            background: var(--tg-theme-secondary-bg-color);
            border-radius: 12px;
            padding: 16px;
            margin-bottom: 16px;
        }
        
        .language-selectors {
            display: flex;
            align-items: center;
            gap: 12px;
            margin-bottom: 16px;
        }
        
        .language-select {
            flex: 1;
            padding: 12px;
            background: var(--tg-theme-bg-color);
            border: 1px solid #2d3b4d;
            border-radius: 8px;
            color: var(--tg-theme-text-color);
            font-size: 14px;
        }
        
        .swap-btn {
            width: 36px;
            height: 36px;
            background: var(--tg-theme-button-color);
            border: none;
            border-radius: 8px;
            color: white;
            cursor: pointer;
            display: flex;
            align-items: center;
            justify-content: center;
        }
        
        .text-areas {
            display: flex;
            flex-direction: column;
            gap: 12px;
        }
        
        .text-input, .text-output {
            width: 100%;
            min-height: 120px;
            padding: 12px;
            background: var(--tg-theme-bg-color);
            border: 1px solid #2d3b4d;
            border-radius: 8px;
            color: var(--tg-theme-text-color);
            font-size: 14px;
            resize: vertical;
            font-family: 'Roboto', sans-serif;
        }
        
        .text-output {
            background: #2a3848;
            color: var(--tg-theme-hint-color);
        }
        
        .translate-btn {
            width: 100%;
            padding: 14px;
            background: var(--tg-theme-button-color);
            border: none;
            border-radius: 8px;
            color: white;
            font-size: 14px;
            font-weight: 500;
            cursor: pointer;
            margin-top: 12px;
        }
        
        .translate-btn:disabled {
            opacity: 0.5;
            cursor: not-allowed;
        }
        
        /* History Section */
        .history-section {
            background: var(--tg-theme-secondary-bg-color);
            border-radius: 12px;
            padding: 16px;
        }
        
        .section-title {
            font-size: 16px;
            font-weight: 500;
            margin-bottom: 12px;
            color: var(--tg-theme-text-color);
        }
        
        .history-item {
            background: var(--tg-theme-bg-color);
            border-radius: 8px;
            padding: 12px;
            margin-bottom: 8px;
            border: 1px solid #2d3b4d;
        }
        
        .history-text {
            font-size: 14px;
            margin-bottom: 4px;
        }
        
        .history-translation {
            font-size: 14px;
            color: var(--tg-theme-link-color);
        }
        
        .history-languages {
            font-size: 12px;
            color: var(--tg-theme-hint-color);
            margin-top: 4px;
        }
        
        /* Support Section */
        .support-container {
            background: var(--tg-theme-secondary-bg-color);
            border-radius: 12px;
            padding: 24px 16px;
            text-align: center;
        }
        
        .support-icon {
            font-size: 48px;
            margin-bottom: 16px;
        }
        
        .support-title {
            font-size: 18px;
            font-weight: 500;
            margin-bottom: 8px;
        }
        
        .support-text {
            font-size: 14px;
            color: var(--tg-theme-hint-color);
            margin-bottom: 20px;
            line-height: 1.4;
        }
        
        .channel-btn {
            padding: 12px 24px;
            background: var(--tg-theme-button-color);
            border: none;
            border-radius: 8px;
            color: white;
            font-size: 14px;
            font-weight: 500;
            cursor: pointer;
            text-decoration: none;
            display: inline-block;
        }
        
        /* Empty State */
        .empty-state {
            text-align: center;
            padding: 40px 20px;
            color: var(--tg-theme-hint-color);
        }
        
        .empty-icon {
            font-size: 48px;
            margin-bottom: 12px;
            opacity: 0.5;
        }
        
        /* Loading */
        .loading {
            text-align: center;
            padding: 20px;
            color: var(--tg-theme-hint-color);
        }
        
        .char-counter {
            text-align: right;
            font-size: 12px;
            color: var(--tg-theme-hint-color);
            margin-top: 4px;
        }
    </style>
</head>
<body>
    <div class="app">
        <!-- Header -->
        <div class="header">
            <div class="header-icon">üî§</div>
            <div class="header-title">Telegram Translator</div>
        </div>
        
        <!-- Navigation -->
        <nav class="tabs">
            <button class="tab-btn active" onclick="switchTab('translator')">–ü–µ—Ä–µ–≤–æ–¥—á–∏–∫</button>
            <button class="tab-btn" onclick="switchTab('support')">–î—Ä—É–≥–æ–µ</button>
        </nav>
        
        <!-- Content -->
        <main class="content">
            <!-- –ü–µ—Ä–µ–≤–æ–¥—á–∏–∫ -->
            <div id="translator-tab" class="tab-content active">
                <div class="translator-container">
                    <div class="language-selectors">
                        <select class="language-select" id="source-lang">
                            <option value="ru">–†—É—Å—Å–∫–∏–π</option>
                            <option value="en">–ê–Ω–≥–ª–∏–π—Å–∫–∏–π</option>
                            <option value="uk">–£–∫—Ä–∞–∏–Ω—Å–∫–∏–π</option>
                        </select>
                        
                        <button class="swap-btn" onclick="swapLanguages()">‚áÑ</button>
                        
                        <select class="language-select" id="target-lang">
                            <option value="en">–ê–Ω–≥–ª–∏–π—Å–∫–∏–π</option>
                            <option value="ru">–†—É—Å—Å–∫–∏–π</option>
                            <option value="uk">–£–∫—Ä–∞–∏–Ω—Å–∫–∏–π</option>
                        </select>
                    </div>
                    
                    <div class="text-areas">
                        <textarea 
                            class="text-input" 
                            id="input-text"
                            placeholder="–í–≤–µ–¥–∏—Ç–µ —Ç–µ–∫—Å—Ç –¥–ª—è –ø–µ—Ä–µ–≤–æ–¥–∞..."
                            maxlength="1000"
                        ></textarea>
                        <div class="char-counter">
                            <span id="char-count">0</span>/1000
                        </div>
                        
                        <div class="text-output" id="output-text">
                            –ü–µ—Ä–µ–≤–æ–¥ –ø–æ—è–≤–∏—Ç—Å—è –∑–¥–µ—Å—å...
                        </div>
                    </div>
                    
                    <button class="translate-btn" onclick="translateText()" id="translate-btn">
                        –ü–µ—Ä–µ–≤–µ—Å—Ç–∏
                    </button>
                </div>
                
                <div class="history-section">
                    <div class="section-title">–ò—Å—Ç–æ—Ä–∏—è –ø–µ—Ä–µ–≤–æ–¥–æ–≤</div>
                    <div id="history-list">
                        <div class="empty-state">
                            <div class="empty-icon">üìù</div>
                            <div>–ó–¥–µ—Å—å –±—É–¥–µ—Ç –∏—Å—Ç–æ—Ä–∏—è –≤–∞—à–∏—Ö –ø–µ—Ä–µ–≤–æ–¥–æ–≤</div>
                        </div>
                    </div>
                </div>
            </div>
            
            <!-- –ü–æ–¥–¥–µ—Ä–∂–∫–∞ -->
            <div id="support-tab" class="tab-content">
                <div class="support-container">
                    <div class="support-icon">‚ù§Ô∏è</div>
                    <div class="support-title">–ü–æ–¥–¥–µ—Ä–∂–∏—Ç–µ –Ω–∞—à –ø—Ä–æ–µ–∫—Ç</div>
                    <div class="support-text">
                        –ï—Å–ª–∏ –≤–∞–º –Ω—Ä–∞–≤–∏—Ç—Å—è –Ω–∞—à –ø–µ—Ä–µ–≤–æ–¥—á–∏–∫ –∏ –≤—ã —Ö–æ—Ç–∏—Ç–µ –ø–æ–¥–¥–µ—Ä–∂–∞—Ç—å –µ–≥–æ —Ä–∞–∑–≤–∏—Ç–∏–µ, 
                        –ø–æ–¥–ø–∏—à–∏—Ç–µ—Å—å –Ω–∞ –Ω–∞—à Telegram-–∫–∞–Ω–∞–ª. –≠—Ç–æ –ø–æ–º–æ–∂–µ—Ç –Ω–∞–º –¥–µ–ª–∞—Ç—å –ø—Ä–∏–ª–æ–∂–µ–Ω–∏–µ –µ—â–µ –ª—É—á—à–µ!
                    </div>
                    <a href="https://t.me/your_channel" class="channel-btn" target="_blank">
                        –ü–æ–¥–ø–∏—Å–∞—Ç—å—Å—è –Ω–∞ –∫–∞–Ω–∞–ª
                    </a>
                </div>
                
                <div class="history-section" style="margin-top: 16px;">
                    <div class="section-title">–û –ø—Ä–∏–ª–æ–∂–µ–Ω–∏–∏</div>
                    <div class="support-text" style="text-align: left; color: var(--tg-theme-text-color);">
                        <p>üì± <strong>Telegram Translator</strong></p>
                        <p>–í–µ—Ä—Å–∏—è: 1.0.0 (Beta)</p>
                        <p>–ü–æ–¥–¥–µ—Ä–∂–∏–≤–∞–µ–º—ã–µ —è–∑—ã–∫–∏: –†—É—Å—Å–∫–∏–π, –ê–Ω–≥–ª–∏–π—Å–∫–∏–π, –£–∫—Ä–∞–∏–Ω—Å–∫–∏–π</p>
                        <p>–î–ª—è –æ–±—Ä–∞—Ç–Ω–æ–π —Å–≤—è–∑–∏: @your_support</p>
                    </div>
                </div>
            </div>
        </main>
    </div>

    <script>
        // –ò–Ω–∏—Ü–∏–∞–ª–∏–∑–∞—Ü–∏—è Telegram Web App
        const tg = window.Telegram.WebApp;
        
        // –°–æ—Å—Ç–æ—è–Ω–∏–µ –ø—Ä–∏–ª–æ–∂–µ–Ω–∏—è
        let state = {
            translationHistory: [],
            currentTranslation: {
                sourceText: '',
                translatedText: '',
                sourceLang: 'ru',
                targetLang: 'en'
            }
        };
        
        // –°–ª–æ–≤–∞—Ä—å –¥–ª—è –ø–µ—Ä–µ–≤–æ–¥–∞ (—É–ø—Ä–æ—â–µ–Ω–Ω—ã–π)
        const translationDictionary = {
            'ru-en': {
                '–ø—Ä–∏–≤–µ—Ç': 'hello',
                '–º–∏—Ä': 'world',
                '–∫–∞–∫ –¥–µ–ª–∞': 'how are you',
                '—Å–ø–∞—Å–∏–±–æ': 'thank you',
                '–ø–æ–∂–∞–ª—É–π—Å—Ç–∞': 'you are welcome',
                '–¥–∞': 'yes',
                '–Ω–µ—Ç': 'no',
                '—Ö–æ—Ä–æ—à–æ': 'good',
                '–ø–ª–æ—Ö–æ': 'bad',
                '—è–∑—ã–∫': 'language',
                '–ø–µ—Ä–µ–≤–æ–¥': 'translation',
                '—Ç–µ–ª–µ–≥—Ä–∞–º': 'telegram'
            },
            'en-ru': {
                'hello': '–ø—Ä–∏–≤–µ—Ç',
                'world': '–º–∏—Ä',
                'how are you': '–∫–∞–∫ –¥–µ–ª–∞',
                'thank you': '—Å–ø–∞—Å–∏–±–æ',
                'you are welcome': '–ø–æ–∂–∞–ª—É–π—Å—Ç–∞',
                'yes': '–¥–∞',
                'no': '–Ω–µ—Ç',
                'good': '—Ö–æ—Ä–æ—à–æ',
                'bad': '–ø–ª–æ—Ö–æ',
                'language': '—è–∑—ã–∫',
                'translation': '–ø–µ—Ä–µ–≤–æ–¥',
                'telegram': '—Ç–µ–ª–µ–≥—Ä–∞–º'
            },
            'ru-uk': {
                '–ø—Ä–∏–≤–µ—Ç': '–ø—Ä–∏–≤—ñ—Ç',
                '–º–∏—Ä': '—Å–≤—ñ—Ç',
                '–∫–∞–∫ –¥–µ–ª–∞': '—è–∫ —Å–ø—Ä–∞–≤–∏',
                '—Å–ø–∞—Å–∏–±–æ': '–¥—è–∫—É—é',
                '–ø–æ–∂–∞–ª—É–π—Å—Ç–∞': '–±—É–¥—å –ª–∞—Å–∫–∞',
                '–¥–∞': '—Ç–∞–∫',
                '–Ω–µ—Ç': '–Ω—ñ',
                '—Ö–æ—Ä–æ—à–æ': '–¥–æ–±—Ä–µ',
                '–ø–ª–æ—Ö–æ': '–ø–æ–≥–∞–Ω–æ',
                '—è–∑—ã–∫': '–º–æ–≤–∞',
                '–ø–µ—Ä–µ–≤–æ–¥': '–ø–µ—Ä–µ–∫–ª–∞–¥',
                '—Ç–µ–ª–µ–≥—Ä–∞–º': '—Ç–µ–ª–µ–≥—Ä–∞–º'
            },
            'uk-ru': {
                '–ø—Ä–∏–≤—ñ—Ç': '–ø—Ä–∏–≤–µ—Ç',
                '—Å–≤—ñ—Ç': '–º–∏—Ä',
                '—è–∫ —Å–ø—Ä–∞–≤–∏': '–∫–∞–∫ –¥–µ–ª–∞',
                '–¥—è–∫—É—é': '—Å–ø–∞—Å–∏–±–æ',
                '–±—É–¥—å –ª–∞—Å–∫–∞': '–ø–æ–∂–∞–ª—É–π—Å—Ç–∞',
                '—Ç–∞–∫': '–¥–∞',
                '–Ω—ñ': '–Ω–µ—Ç',
                '–¥–æ–±—Ä–µ': '—Ö–æ—Ä–æ—à–æ',
                '–ø–æ–≥–∞–Ω–æ': '–ø–ª–æ—Ö–æ',
                '–º–æ–≤–∞': '—è–∑—ã–∫',
                '–ø–µ—Ä–µ–∫–ª–∞–¥': '–ø–µ—Ä–µ–≤–æ–¥',
                '—Ç–µ–ª–µ–≥—Ä–∞–º': '—Ç–µ–ª–µ–≥—Ä–∞–º'
            },
            'en-uk': {
                'hello': '–ø—Ä–∏–≤—ñ—Ç',
                'world': '—Å–≤—ñ—Ç',
                'how are you': '—è–∫ —Å–ø—Ä–∞–≤–∏',
                'thank you': '–¥—è–∫—É—é',
                'you are welcome': '–±—É–¥—å –ª–∞—Å–∫–∞',
                'yes': '—Ç–∞–∫',
                'no': '–Ω—ñ',
                'good': '–¥–æ–±—Ä–µ',
                'bad': '–ø–æ–≥–∞–Ω–æ',
                'language': '–º–æ–≤–∞',
                'translation': '–ø–µ—Ä–µ–∫–ª–∞–¥',
                'telegram': '—Ç–µ–ª–µ–≥—Ä–∞–º'
            },
            'uk-en': {
                '–ø—Ä–∏–≤—ñ—Ç': 'hello',
                '—Å–≤—ñ—Ç': 'world',
                '—è–∫ —Å–ø—Ä–∞–≤–∏': 'how are you',
                '–¥—è–∫—É—é': 'thank you',
                '–±—É–¥—å –ª–∞—Å–∫–∞': 'you are welcome',
                '—Ç–∞–∫': 'yes',
                '–Ω—ñ': 'no',
                '–¥–æ–±—Ä–µ': 'good',
                '–ø–æ–≥–∞–Ω–æ': 'bad',
                '–º–æ–≤–∞': 'language',
                '–ø–µ—Ä–µ–∫–ª–∞–¥': 'translation',
                '—Ç–µ–ª–µ–≥—Ä–∞–º': 'telegram'
            }
        };
        
        // –ó–∞–ø—É—Å–∫ –ø—Ä–∏–ª–æ–∂–µ–Ω–∏—è
        function init() {
            tg.expand();
            tg.enableClosingConfirmation();
            loadState();
            setupEventListeners();
            updateUI();
        }
        
        // –ó–∞–≥—Ä—É–∑–∫–∞ —Å–æ—Å—Ç–æ—è–Ω–∏—è
        function loadState() {
            const saved = localStorage.getItem('translatorState');
            if (saved) {
                state = JSON.parse(saved);
                updateHistoryUI();
            }
        }
        
        // –°–æ—Ö—Ä–∞–Ω–µ–Ω–∏–µ —Å–æ—Å—Ç–æ—è–Ω–∏—è
        function saveState() {
            localStorage.setItem('translatorState', JSON.stringify(state));
        }
        
        // –ù–∞—Å—Ç—Ä–æ–π–∫–∞ –æ–±—Ä–∞–±–æ—Ç—á–∏–∫–æ–≤ —Å–æ–±—ã—Ç–∏–π
        function setupEventListeners() {
            // –°—á–µ—Ç—á–∏–∫ —Å–∏–º–≤–æ–ª–æ–≤
            const inputText = document.getElementById('input-text');
            inputText.addEventListener('input', function() {
                const count = this.value.length;
                document.getElementById('char-count').textContent = count;
                
                // –ë–ª–æ–∫–∏—Ä–æ–≤–∫–∞ –∫–Ω–æ–ø–∫–∏ –µ—Å–ª–∏ –ø—É—Å—Ç–æ–π —Ç–µ–∫—Å—Ç
                const translateBtn = document.getElementById('translate-btn');
                translateBtn.disabled = count === 0;
            });
            
            // –ü–µ—Ä–µ–≤–æ–¥ –ø–æ Enter (Ctrl+Enter)
            inputText.addEventListener('keydown', function(e) {
                if (e.ctrlKey && e.key === 'Enter') {
                    translateText();
                }
            });
        }
        
        // –ü–µ—Ä–µ–∫–ª—é—á–µ–Ω–∏–µ –≤–∫–ª–∞–¥–æ–∫
        function switchTab(tabName) {
            // –û–±–Ω–æ–≤–ª—è–µ–º –∫–Ω–æ–ø–∫–∏
            document.querySelectorAll('.tab-btn').forEach(btn => {
                btn.classList.remove('active');
            });
            event.target.classList.add('active');
            
            // –û–±–Ω–æ–≤–ª—è–µ–º –∫–æ–Ω—Ç–µ–Ω—Ç
            document.querySelectorAll('.tab-content').forEach(content => {
                content.classList.remove('active');
            });
            document.getElementById(tabName + '-tab').classList.add('active');
        }
        
        // –û–±–º–µ–Ω —è–∑—ã–∫–æ–≤
        function swapLanguages() {
            const sourceLang = document.getElementById('source-lang');
            const targetLang = document.getElementById('target-lang');
            
            const temp = sourceLang.value;
            sourceLang.value = targetLang.value;
            targetLang.value = temp;
            
            // –¢–∞–∫–∂–µ –º–µ–Ω—è–µ–º —Ç–µ–∫—Å—Ç –º–µ—Å—Ç–∞–º–∏ –µ—Å–ª–∏ –µ—Å—Ç—å –ø–µ—Ä–µ–≤–æ–¥
            const inputText = document.getElementById('input-text');
            const outputText = document.getElementById('output-text');
            
            if (outputText.textContent !== '–ü–µ—Ä–µ–≤–æ–¥ –ø–æ—è–≤–∏—Ç—Å—è –∑–¥–µ—Å—å...') {
                const tempText = inputText.value;
                inputText.value = outputText.textContent;
                outputText.textContent = tempText;
            }
            
            tg.HapticFeedback.impactOccurred('light');
        }
        
        // –§—É–Ω–∫—Ü–∏—è –ø–µ—Ä–µ–≤–æ–¥–∞
        function translateText() {
            const inputText = document.getElementById('input-text').value.trim();
            const sourceLang = document.getElementById('source-lang').value;
            const targetLang = document.getElementById('target-lang').value;
            
            if (!inputText) {
                tg.showAlert('–í–≤–µ–¥–∏—Ç–µ —Ç–µ–∫—Å—Ç –¥–ª—è –ø–µ—Ä–µ–≤–æ–¥–∞');
                return;
            }
            
            if (sourceLang === targetLang) {
                tg.showAlert('–í—ã–±–µ—Ä–∏—Ç–µ —Ä–∞–∑–Ω—ã–µ —è–∑—ã–∫–∏ –¥–ª—è –ø–µ—Ä–µ–≤–æ–¥–∞');
                return;
            }
            
            // –ü–æ–∫–∞–∑—ã–≤–∞–µ–º –∑–∞–≥—Ä—É–∑–∫—É
            const outputText = document.getElementById('output-text');
            outputText.textContent = '–ü–µ—Ä–µ–≤–æ–∂—É...';
            outputText.style.color = var('--tg-theme-hint-color');
            
            // –ò–º–∏—Ç–∞—Ü–∏—è –∑–∞–¥–µ—Ä–∂–∫–∏ –ø–µ—Ä–µ–≤–æ–¥–∞
            setTimeout(() => {
                const translationKey = `${sourceLang}-${targetLang}`;
                const translated = translateWithDictionary(inputText, translationKey);
                
                outputText.textContent = translated;
                outputText.style.color = var('--tg-theme-text-color');
                
                // –°–æ—Ö—Ä–∞–Ω—è–µ–º –≤ –∏—Å—Ç–æ—Ä–∏—é
                saveToHistory(inputText, translated, sourceLang, targetLang);
                
                // –í–∏–±—Ä–∞—Ü–∏—è —É—Å–ø–µ—Ö–∞
                tg.HapticFeedback.impactOccurred('success');
                
            }, 800);
        }
        
        // –£–ø—Ä–æ—â–µ–Ω–Ω—ã–π –ø–µ—Ä–µ–≤–æ–¥—á–∏–∫ —á–µ—Ä–µ–∑ —Å–ª–æ–≤–∞—Ä—å
        function translateWithDictionary(text, direction) {
            const lowerText = text.toLowerCase();
            
            // –°–Ω–∞—á–∞–ª–∞ –ø—Ä–æ–≤–µ—Ä—è–µ–º —Ç–æ—á–Ω—ã–µ —Å–æ–≤–ø–∞–¥–µ–Ω–∏—è
            if (translationDictionary[direction] && translationDictionary[direction][lowerText]) {
                return capitalizeFirstLetter(translationDictionary[direction][lowerText]);
            }
            
            // –ï—Å–ª–∏ –Ω–µ—Ç —Ç–æ—á–Ω–æ–≥–æ —Å–æ–≤–ø–∞–¥–µ–Ω–∏—è, —Ä–∞–∑–±–∏–≤–∞–µ–º –Ω–∞ —Å–ª–æ–≤–∞
            const words = text.split(' ');
            const translatedWords = words.map(word => {
                const lowerWord = word.toLowerCase();
                if (translationDictionary[direction] && translationDictionary[direction][lowerWord]) {
                    return translationDictionary[direction][lowerWord];
                }
                // –ï—Å–ª–∏ —Å–ª–æ–≤–∞ –Ω–µ—Ç –≤ —Å–ª–æ–≤–∞—Ä–µ, –≤–æ–∑–≤—Ä–∞—â–∞–µ–º –æ—Ä–∏–≥–∏–Ω–∞–ª —Å –ø–æ–º–µ—Ç–∫–æ–π
                return `[${word}]`;
            });
            
            return translatedWords.join(' ');
        }
        
        // –ó–∞–≥–ª–∞–≤–Ω–∞—è –±—É–∫–≤–∞
        function capitalizeFirstLetter(string) {
            return string.charAt(0).toUpperCase() + string.slice(1);
        }
        
        // –°–æ—Ö—Ä–∞–Ω–µ–Ω–∏–µ –≤ –∏—Å—Ç–æ—Ä–∏—é
        function saveToHistory(sourceText, translatedText, sourceLang, targetLang) {
            const historyItem = {
                id: Date.now(),
                sourceText: sourceText,
                translatedText: translatedText,
                sourceLang: sourceLang,
                targetLang: targetLang,
                timestamp: new Date().toLocaleTimeString()
            };
            
            state.translationHistory.unshift(historyItem);
            
            // –û–≥—Ä–∞–Ω–∏—á–∏–≤–∞–µ–º –∏—Å—Ç–æ—Ä–∏—é 20 –ø–æ—Å–ª–µ–¥–Ω–∏–º–∏ –ø–µ—Ä–µ–≤–æ–¥–∞–º–∏
            if (state.translationHistory.length > 20) {
                state.translationHistory = state.translationHistory.slice(0, 20);
            }
            
            saveState();
            updateHistoryUI();
        }
        
        // –û–±–Ω–æ–≤–ª–µ–Ω–∏–µ –∏—Å—Ç–æ—Ä–∏–∏ –≤ UI
        function updateHistoryUI() {
            const historyList = document.getElementById('history-list');
            
            if (state.translationHistory.length === 0) {
                historyList.innerHTML = `
                    <div class="empty-state">
                        <div class="empty-icon">üìù</div>
                        <div>–ó–¥–µ—Å—å –±—É–¥–µ—Ç –∏—Å—Ç–æ—Ä–∏—è –≤–∞—à–∏—Ö –ø–µ—Ä–µ–≤–æ–¥–æ–≤</div>
                    </div>
                `;
                return;
            }
            
            historyList.innerHTML = state.translationHistory.map(item => `
                <div class="history-item">
                    <div class="history-text">${item.sourceText}</div>
                    <div class="history-translation">${item.translatedText}</div>
                    <div class="history-languages">
                        ${getLanguageName(item.sourceLang)} ‚Üí ${getLanguageName(item.targetLang)} 
                        ‚Ä¢ ${item.timestamp}
                    </div>
                </div>
            `).join('');
        }
        
        // –ü–æ–ª—É—á–µ–Ω–∏–µ –Ω–∞–∑–≤–∞–Ω–∏—è —è–∑—ã–∫–∞
        function getLanguageName(code) {
            const languages = {
                'ru': '–†—É—Å—Å–∫–∏–π',
                'en': '–ê–Ω–≥–ª–∏–π—Å–∫–∏–π',
                'uk': '–£–∫—Ä–∞–∏–Ω—Å–∫–∏–π'
            };
            return languages[code] || code;
        }
        
        // –û–±–Ω–æ–≤–ª–µ–Ω–∏–µ UI
        function updateUI() {
            // –ü–æ–∫–∞ –Ω–∏—á–µ–≥–æ –æ—Å–æ–±–µ–Ω–Ω–æ–≥–æ, –º–æ–∂–Ω–æ –¥–æ–±–∞–≤–∏—Ç—å –ø—Ä–∏ –Ω–µ–æ–±—Ö–æ–¥–∏–º–æ—Å—Ç–∏
        }
        
        // –ó–∞–ø—É—Å–∫ –ø—Ä–∏ –∑–∞–≥—Ä—É–∑–∫–µ
        document.addEventListener('DOMContentLoaded', init);
    </script>
</body>
</html>
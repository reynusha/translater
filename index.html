<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Quantum Messenger</title>
    <link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/6.4.0/css/all.min.css">
    <style>
        :root {
            --bg-primary: #0f0f0f;
            --bg-secondary: #1a1a1a;
            --bg-tertiary: #2d2d2d;
            --bg-quaternary: #3a3a3a;
            --text-primary: #ffffff;
            --text-secondary: #a8a8a8;
            --text-tertiary: #6a6a6a;
            --accent-primary: #3390ec;
            --accent-secondary: #2a7bc8;
            --accent-gradient: linear-gradient(135deg, #3390ec, #2a7bc8);
            --border-primary: #404040;
            --border-secondary: #505050;
            --success: #4caf50;
            --warning: #ff9800;
            --error: #f44336;
            --online: #4caf50;
            --offline: #f44336;
            --shadow: 0 4px 12px rgba(0, 0, 0, 0.15);
            --radius-sm: 6px;
            --radius-md: 10px;
            --radius-lg: 16px;
            --transition: all 0.3s cubic-bezier(0.4, 0, 0.2, 1);
        }

        * {
            margin: 0;
            padding: 0;
            box-sizing: border-box;
        }

        body {
            font-family: 'Segoe UI', system-ui, -apple-system, sans-serif;
            background-color: var(--bg-primary);
            color: var(--text-primary);
            line-height: 1.6;
            height: 100vh;
            overflow: hidden;
            user-select: none;
        }

        #app {
            display: flex;
            flex-direction: column;
            height: 100vh;
            max-width: 100%;
            margin: 0 auto;
            position: relative;
            background-color: var(--bg-secondary);
        }

        /* Header Styles */
        .header {
            display: flex;
            align-items: center;
            justify-content: space-between;
            padding: 12px 16px;
            background-color: var(--bg-tertiary);
            border-bottom: 1px solid var(--border-primary);
            position: relative;
            z-index: 100;
        }

        .header-title {
            font-size: 18px;
            font-weight: 700;
            display: flex;
            align-items: center;
            gap: 8px;
        }

        .header-actions {
            display: flex;
            gap: 12px;
        }

        .header-action {
            background: none;
            border: none;
            color: var(--text-secondary);
            font-size: 18px;
            cursor: pointer;
            transition: var(--transition);
            width: 36px;
            height: 36px;
            border-radius: 50%;
            display: flex;
            align-items: center;
            justify-content: center;
        }

        .header-action:hover {
            background-color: rgba(255, 255, 255, 0.05);
            color: var(--text-primary);
        }

        /* Content Area */
        .content {
            flex: 1;
            overflow: hidden;
            position: relative;
        }

        .tab-content {
            position: absolute;
            top: 0;
            left: 0;
            width: 100%;
            height: 100%;
            overflow-y: auto;
            padding: 16px;
            opacity: 0;
            visibility: hidden;
            transition: var(--transition);
        }

        .tab-content.active {
            opacity: 1;
            visibility: visible;
        }

        /* Bottom Navigation */
        .bottom-nav {
            display: flex;
            background-color: var(--bg-tertiary);
            border-top: 1px solid var(--border-primary);
            position: relative;
            z-index: 100;
        }

        .nav-item {
            flex: 1;
            text-align: center;
            padding: 12px 0;
            cursor: pointer;
            transition: var(--transition);
            font-size: 12px;
            color: var(--text-secondary);
            position: relative;
        }

        .nav-item.active {
            color: var(--accent-primary);
        }

        .nav-item.active::after {
            content: '';
            position: absolute;
            top: 0;
            left: 50%;
            transform: translateX(-50%);
            width: 60%;
            height: 3px;
            background: var(--accent-gradient);
            border-radius: 0 0 3px 3px;
        }

        .nav-icon {
            font-size: 20px;
            margin-bottom: 4px;
        }

        .nav-item:hover {
            background-color: rgba(255, 255, 255, 0.03);
        }

        /* Home/Feed Styles */
        .feed {
            display: flex;
            flex-direction: column;
            gap: 16px;
        }

        .create-post-card {
            background-color: var(--bg-tertiary);
            border-radius: var(--radius-md);
            padding: 16px;
            box-shadow: var(--shadow);
        }

        .create-post-header {
            display: flex;
            align-items: center;
            margin-bottom: 12px;
        }

        .create-post-avatar {
            width: 40px;
            height: 40px;
            border-radius: 50%;
            margin-right: 12px;
            background: var(--accent-gradient);
            display: flex;
            align-items: center;
            justify-content: center;
            font-weight: 700;
            color: white;
            font-size: 16px;
        }

        .create-post-input {
            flex: 1;
            background-color: var(--bg-quaternary);
            border: 1px solid var(--border-primary);
            border-radius: 20px;
            padding: 10px 16px;
            color: var(--text-primary);
            font-size: 14px;
            cursor: pointer;
            transition: var(--transition);
        }

        .create-post-input:hover {
            background-color: var(--bg-secondary);
        }

        .create-post-input::placeholder {
            color: var(--text-tertiary);
        }

        .post {
            background-color: var(--bg-tertiary);
            border-radius: var(--radius-md);
            padding: 16px;
            box-shadow: var(--shadow);
            transition: var(--transition);
        }

        .post:hover {
            transform: translateY(-2px);
            box-shadow: 0 6px 16px rgba(0, 0, 0, 0.2);
        }

        .post-header {
            display: flex;
            align-items: center;
            margin-bottom: 12px;
        }

        .avatar {
            width: 40px;
            height: 40px;
            border-radius: 50%;
            margin-right: 12px;
            background: var(--accent-gradient);
            display: flex;
            align-items: center;
            justify-content: center;
            font-weight: 700;
            color: white;
            font-size: 16px;
            cursor: pointer;
            transition: var(--transition);
        }

        .avatar:hover {
            transform: scale(1.05);
        }

        .user-info {
            flex: 1;
        }

        .user-display-name {
            font-weight: 600;
            cursor: pointer;
            display: flex;
            align-items: center;
            gap: 6px;
        }

        .user-display-name:hover {
            color: var(--accent-primary);
        }

        .user-username {
            color: var(--text-secondary);
            font-size: 13px;
        }

        .verified-badge {
            color: var(--accent-primary);
            font-size: 14px;
        }

        .post-time {
            color: var(--text-tertiary);
            font-size: 12px;
        }

        .post-content {
            margin-bottom: 16px;
            line-height: 1.5;
            font-size: 15px;
        }

        .post-actions {
            display: flex;
            justify-content: space-around;
            border-top: 1px solid var(--border-primary);
            padding-top: 12px;
        }

        .action-btn {
            background: none;
            border: none;
            color: var(--text-secondary);
            cursor: pointer;
            display: flex;
            align-items: center;
            gap: 6px;
            font-size: 14px;
            padding: 6px 12px;
            border-radius: var(--radius-sm);
            transition: var(--transition);
        }

        .action-btn:hover {
            background-color: rgba(255, 255, 255, 0.05);
            color: var(--text-primary);
        }

        .action-btn.active {
            color: var(--accent-primary);
        }

        /* Chats Styles */
        .chats-container {
            height: 100%;
            display: flex;
            flex-direction: column;
        }

        .chats-search {
            padding: 0 0 16px 0;
            position: sticky;
            top: 0;
            background-color: var(--bg-secondary);
            z-index: 10;
        }

        .search-input-container {
            position: relative;
        }

        .search-input {
            width: 100%;
            padding: 12px 16px 12px 40px;
            border-radius: 20px;
            border: none;
            background-color: var(--bg-quaternary);
            color: var(--text-primary);
            font-size: 14px;
            transition: var(--transition);
        }

        .search-input:focus {
            outline: none;
            background-color: var(--bg-tertiary);
            box-shadow: 0 0 0 2px var(--accent-primary);
        }

        .search-icon {
            position: absolute;
            left: 16px;
            top: 50%;
            transform: translateY(-50%);
            color: var(--text-tertiary);
        }

        .chats-list {
            list-style: none;
            flex: 1;
            overflow-y: auto;
        }

        .chat-item {
            display: flex;
            padding: 12px;
            border-radius: var(--radius-md);
            cursor: pointer;
            transition: var(--transition);
            margin-bottom: 8px;
        }

        .chat-item:hover {
            background-color: var(--bg-quaternary);
        }

        .chat-item.active {
            background-color: var(--bg-quaternary);
        }

        .chat-avatar {
            width: 50px;
            height: 50px;
            border-radius: 50%;
            margin-right: 12px;
            background: var(--accent-gradient);
            display: flex;
            align-items: center;
            justify-content: center;
            font-weight: bold;
            color: white;
            font-size: 18px;
        }

        .chat-info {
            flex: 1;
            min-width: 0;
        }

        .chat-header {
            display: flex;
            justify-content: space-between;
            align-items: center;
            margin-bottom: 6px;
        }

        .chat-name {
            font-weight: 600;
            font-size: 15px;
            white-space: nowrap;
            overflow: hidden;
            text-overflow: ellipsis;
        }

        .chat-time {
            color: var(--text-tertiary);
            font-size: 12px;
            white-space: nowrap;
        }

        .chat-last-message {
            color: var(--text-secondary);
            font-size: 14px;
            white-space: nowrap;
            overflow: hidden;
            text-overflow: ellipsis;
        }

        .chat-meta {
            display: flex;
            flex-direction: column;
            align-items: flex-end;
            gap: 4px;
        }

        .chat-unread {
            background-color: var(--accent-primary);
            color: white;
            font-size: 12px;
            width: 20px;
            height: 20px;
            border-radius: 50%;
            display: flex;
            align-items: center;
            justify-content: center;
        }

        .chat-online {
            width: 10px;
            height: 10px;
            border-radius: 50%;
            background-color: var(--online);
        }

        /* Chat View Styles */
        .chat-view {
            height: 100%;
            display: flex;
            flex-direction: column;
        }

        .chat-header-detailed {
            display: flex;
            align-items: center;
            padding: 12px 16px;
            border-bottom: 1px solid var(--border-primary);
            background-color: var(--bg-tertiary);
        }

        .back-button {
            background: none;
            border: none;
            color: var(--text-primary);
            font-size: 18px;
            margin-right: 12px;
            cursor: pointer;
            width: 36px;
            height: 36px;
            border-radius: 50%;
            display: flex;
            align-items: center;
            justify-content: center;
            transition: var(--transition);
        }

        .back-button:hover {
            background-color: rgba(255, 255, 255, 0.05);
        }

        .chat-messages {
            flex: 1;
            padding: 16px;
            overflow-y: auto;
            display: flex;
            flex-direction: column;
            gap: 16px;
        }

        .message {
            display: flex;
            max-width: 80%;
            animation: messageAppear 0.3s ease-out;
        }

        @keyframes messageAppear {
            from {
                opacity: 0;
                transform: translateY(10px);
            }
            to {
                opacity: 1;
                transform: translateY(0);
            }
        }

        .message.own {
            align-self: flex-end;
        }

        .message-bubble {
            padding: 12px 16px;
            border-radius: 18px;
            background-color: var(--bg-quaternary);
            position: relative;
            box-shadow: 0 2px 4px rgba(0, 0, 0, 0.1);
        }

        .message.own .message-bubble {
            background: var(--accent-gradient);
            color: white;
        }

        .message-content {
            word-wrap: break-word;
            line-height: 1.4;
        }

        .message-time {
            font-size: 11px;
            color: var(--text-tertiary);
            margin-top: 4px;
            text-align: right;
        }

        .message.own .message-time {
            color: rgba(255, 255, 255, 0.7);
        }

        .message-input-container {
            display: flex;
            padding: 12px 16px;
            border-top: 1px solid var(--border-primary);
            background-color: var(--bg-tertiary);
            gap: 12px;
            align-items: flex-end;
        }

        .message-input {
            flex: 1;
            padding: 12px 16px;
            border-radius: 24px;
            border: none;
            background-color: var(--bg-quaternary);
            color: var(--text-primary);
            font-size: 15px;
            resize: none;
            max-height: 120px;
            outline: none;
            transition: var(--transition);
        }

        .message-input:focus {
            background-color: var(--bg-secondary);
            box-shadow: 0 0 0 2px var(--accent-primary);
        }

        .send-button {
            background: var(--accent-gradient);
            border: none;
            border-radius: 50%;
            width: 44px;
            height: 44px;
            color: white;
            cursor: pointer;
            display: flex;
            align-items: center;
            justify-content: center;
            font-size: 18px;
            transition: var(--transition);
            flex-shrink: 0;
        }

        .send-button:hover {
            transform: scale(1.05);
            box-shadow: 0 4px 8px rgba(51, 144, 236, 0.3);
        }

        .send-button:disabled {
            background: var(--bg-quaternary);
            color: var(--text-tertiary);
            cursor: not-allowed;
            transform: none;
            box-shadow: none;
        }

        /* Profile Styles */
        .profile-container {
            height: 100%;
            overflow-y: auto;
        }

        .profile-header {
            text-align: center;
            padding: 24px 16px;
            border-bottom: 1px solid var(--border-primary);
            background-color: var(--bg-tertiary);
            margin: -16px -16px 16px -16px;
        }

        .profile-avatar-large {
            width: 100px;
            height: 100px;
            border-radius: 50%;
            margin: 0 auto 16px;
            background: var(--accent-gradient);
            display: flex;
            align-items: center;
            justify-content: center;
            font-size: 36px;
            font-weight: bold;
            color: white;
            box-shadow: var(--shadow);
        }

        .profile-name {
            font-size: 24px;
            font-weight: 700;
            margin-bottom: 4px;
        }

        .profile-username {
            color: var(--text-secondary);
            margin-bottom: 12px;
            display: flex;
            align-items: center;
            justify-content: center;
            gap: 6px;
        }

        .profile-bio {
            margin-bottom: 16px;
            line-height: 1.5;
            max-width: 400px;
            margin-left: auto;
            margin-right: auto;
        }

        .profile-status {
            display: inline-flex;
            align-items: center;
            gap: 6px;
            padding: 6px 12px;
            border-radius: 12px;
            background-color: var(--bg-quaternary);
            font-size: 13px;
            margin-bottom: 16px;
        }

        .status-indicator {
            width: 8px;
            height: 8px;
            border-radius: 50%;
        }

        .status-indicator.online {
            background-color: var(--online);
        }

        .status-indicator.offline {
            background-color: var(--offline);
        }

        .profile-role {
            font-size: 14px;
            color: var(--accent-primary);
            font-weight: 600;
        }

        .profile-stats {
            display: flex;
            justify-content: center;
            gap: 24px;
            margin-top: 16px;
        }

        .stat {
            text-align: center;
        }

        .stat-value {
            font-size: 18px;
            font-weight: 700;
        }

        .stat-label {
            font-size: 12px;
            color: var(--text-secondary);
        }

        .profile-posts {
            margin-top: 24px;
        }

        .section-title {
            font-size: 18px;
            font-weight: 600;
            margin-bottom: 16px;
            display: flex;
            align-items: center;
            gap: 8px;
        }

        /* Settings Styles */
        .settings-container {
            height: 100%;
            overflow-y: auto;
        }

        .settings-section {
            background-color: var(--bg-tertiary);
            border-radius: var(--radius-md);
            padding: 20px;
            margin-bottom: 20px;
            box-shadow: var(--shadow);
        }

        .settings-title {
            font-size: 18px;
            font-weight: 600;
            margin-bottom: 20px;
            display: flex;
            align-items: center;
            gap: 10px;
        }

        .settings-title i {
            color: var(--accent-primary);
        }

        .form-group {
            margin-bottom: 20px;
        }

        .form-label {
            display: block;
            margin-bottom: 8px;
            color: var(--text-secondary);
            font-size: 14px;
            font-weight: 500;
        }

        .form-input, .form-textarea {
            width: 100%;
            padding: 12px 16px;
            border-radius: var(--radius-sm);
            border: 1px solid var(--border-primary);
            background-color: var(--bg-quaternary);
            color: var(--text-primary);
            font-size: 15px;
            transition: var(--transition);
        }

        .form-input:focus, .form-textarea:focus {
            outline: none;
            border-color: var(--accent-primary);
            box-shadow: 0 0 0 2px rgba(51, 144, 236, 0.2);
        }

        .form-textarea {
            resize: vertical;
            min-height: 100px;
        }

        .save-button {
            background: var(--accent-gradient);
            border: none;
            border-radius: var(--radius-md);
            padding: 14px 24px;
            color: white;
            cursor: pointer;
            width: 100%;
            font-weight: 600;
            font-size: 16px;
            transition: var(--transition);
            margin-top: 10px;
        }

        .save-button:hover {
            transform: translateY(-2px);
            box-shadow: 0 6px 12px rgba(51, 144, 236, 0.3);
        }

        .save-button:active {
            transform: translateY(0);
        }

        /* Modal Styles */
        .modal {
            position: fixed;
            top: 0;
            left: 0;
            width: 100%;
            height: 100%;
            background-color: rgba(0, 0, 0, 0.7);
            display: flex;
            align-items: center;
            justify-content: center;
            z-index: 1000;
            opacity: 0;
            visibility: hidden;
            transition: var(--transition);
        }

        .modal.active {
            opacity: 1;
            visibility: visible;
        }

        .modal-content {
            background-color: var(--bg-tertiary);
            border-radius: var(--radius-lg);
            padding: 24px;
            max-width: 400px;
            width: 90%;
            box-shadow: 0 10px 30px rgba(0, 0, 0, 0.3);
            transform: translateY(20px);
            transition: var(--transition);
        }

        .modal.active .modal-content {
            transform: translateY(0);
        }

        .modal-header {
            display: flex;
            justify-content: space-between;
            align-items: center;
            margin-bottom: 16px;
        }

        .modal-title {
            font-size: 20px;
            font-weight: 700;
        }

        .modal-close {
            background: none;
            border: none;
            color: var(--text-secondary);
            font-size: 20px;
            cursor: pointer;
            width: 32px;
            height: 32px;
            border-radius: 50%;
            display: flex;
            align-items: center;
            justify-content: center;
            transition: var(--transition);
        }

        .modal-close:hover {
            background-color: rgba(255, 255, 255, 0.05);
            color: var(--text-primary);
        }

        .modal-body {
            margin-bottom: 24px;
        }

        .modal-text {
            color: var(--text-secondary);
            line-height: 1.5;
        }

        .modal-actions {
            display: flex;
            gap: 12px;
            justify-content: flex-end;
        }

        .modal-button {
            padding: 10px 20px;
            border-radius: var(--radius-sm);
            border: none;
            font-weight: 600;
            cursor: pointer;
            transition: var(--transition);
        }

        .modal-button.primary {
            background: var(--accent-gradient);
            color: white;
        }

        .modal-button.secondary {
            background-color: var(--bg-quaternary);
            color: var(--text-primary);
        }

        .modal-button:hover {
            transform: translateY(-2px);
            box-shadow: 0 4px 8px rgba(0, 0, 0, 0.2);
        }

        /* Notification Styles */
        .notification {
            position: fixed;
            top: 20px;
            right: 20px;
            background-color: var(--bg-tertiary);
            border-left: 4px solid var(--accent-primary);
            border-radius: var(--radius-md);
            padding: 16px;
            max-width: 350px;
            box-shadow: 0 6px 16px rgba(0, 0, 0, 0.3);
            display: flex;
            align-items: flex-start;
            gap: 12px;
            z-index: 1100;
            transform: translateX(400px);
            transition: transform 0.4s cubic-bezier(0.34, 1.56, 0.64, 1);
        }

        .notification.show {
            transform: translateX(0);
        }

        .notification-icon {
            color: var(--accent-primary);
            font-size: 20px;
            flex-shrink: 0;
        }

        .notification-content {
            flex: 1;
        }

        .notification-title {
            font-weight: 600;
            margin-bottom: 4px;
        }

        .notification-message {
            color: var(--text-secondary);
            font-size: 14px;
            line-height: 1.4;
        }

        .notification-close {
            background: none;
            border: none;
            color: var(--text-tertiary);
            cursor: pointer;
            font-size: 16px;
            flex-shrink: 0;
            width: 24px;
            height: 24px;
            border-radius: 50%;
            display: flex;
            align-items: center;
            justify-content: center;
            transition: var(--transition);
        }

        .notification-close:hover {
            background-color: rgba(255, 255, 255, 0.05);
            color: var(--text-primary);
        }

        /* Loading Spinner */
        .spinner {
            width: 40px;
            height: 40px;
            border: 4px solid rgba(255, 255, 255, 0.1);
            border-left: 4px solid var(--accent-primary);
            border-radius: 50%;
            animation: spin 1s linear infinite;
            margin: 20px auto;
        }

        @keyframes spin {
            0% { transform: rotate(0deg); }
            100% { transform: rotate(360deg); }
        }

        /* Utility Classes */
        .hidden {
            display: none !important;
        }

        .text-center {
            text-align: center;
        }

        .mt-1 { margin-top: 8px; }
        .mt-2 { margin-top: 16px; }
        .mt-3 { margin-top: 24px; }
        .mb-1 { margin-bottom: 8px; }
        .mb-2 { margin-bottom: 16px; }
        .mb-3 { margin-bottom: 24px; }

        /* Responsive Design */
        @media (min-width: 768px) {
            #app {
                max-width: 500px;
                height: 90vh;
                margin: 5vh auto;
                border-radius: 16px;
                overflow: hidden;
                box-shadow: 0 10px 30px rgba(0, 0, 0, 0.5);
            }
        }

        /* Scrollbar Styling */
        ::-webkit-scrollbar {
            width: 6px;
        }

        ::-webkit-scrollbar-track {
            background: var(--bg-secondary);
        }

        ::-webkit-scrollbar-thumb {
            background: var(--bg-quaternary);
            border-radius: 3px;
        }

        ::-webkit-scrollbar-thumb:hover {
            background: var(--text-tertiary);
        }
    </style>
</head>
<body>
    <div id="app">
        <!-- Header -->
        <div class="header">
            <div class="header-title">
                <i class="fas fa-atom"></i>
                <span id="header-text">Quantum</span>
            </div>
            <div class="header-actions">
                <button class="header-action" id="search-button">
                    <i class="fas fa-search"></i>
                </button>
                <button class="header-action" id="menu-button">
                    <i class="fas fa-ellipsis-v"></i>
                </button>
            </div>
        </div>

        <!-- Content Area -->
        <div class="content">
            <!-- Home Tab -->
            <div class="tab-content active" id="home-tab">
                <div class="feed">
                    <div class="create-post-card">
                        <div class="create-post-header">
                            <div class="create-post-avatar" id="current-user-avatar">U</div>
                            <div class="create-post-input" id="create-post-trigger">What's on your mind?</div>
                        </div>
                    </div>
                    <div id="posts-container">
                        <!-- Posts will be dynamically inserted here -->
                    </div>
                </div>
            </div>

            <!-- Chats Tab -->
            <div class="tab-content" id="chats-tab">
                <div class="chats-container">
                    <div class="chats-search">
                        <div class="search-input-container">
                            <i class="fas fa-search search-icon"></i>
                            <input type="text" class="search-input" placeholder="Search chats...">
                        </div>
                    </div>
                    <ul class="chats-list" id="chats-list">
                        <!-- Chat items will be dynamically inserted here -->
                    </ul>
                </div>
            </div>

            <!-- Chat View (Hidden by default) -->
            <div class="tab-content" id="chat-view">
                <div class="chat-view">
                    <div class="chat-header-detailed">
                        <button class="back-button" id="back-to-chats">
                            <i class="fas fa-arrow-left"></i>
                        </button>
                        <div class="avatar" id="chat-user-avatar">U</div>
                        <div class="user-info">
                            <div class="user-display-name" id="chat-user-name">
                                User Name
                                <i class="fas fa-check-circle verified-badge"></i>
                            </div>
                            <div class="user-username" id="chat-user-status">online</div>
                        </div>
                    </div>
                    <div class="chat-messages" id="chat-messages">
                        <!-- Messages will be dynamically inserted here -->
                    </div>
                    <div class="message-input-container">
                        <textarea class="message-input" id="message-input" placeholder="Type a message..."></textarea>
                        <button class="send-button" id="send-message">
                            <i class="fas fa-paper-plane"></i>
                        </button>
                    </div>
                </div>
            </div>

            <!-- Profile Tab -->
            <div class="tab-content" id="profile-tab">
                <div class="profile-container">
                    <div class="profile-header">
                        <div class="profile-avatar-large" id="profile-avatar-large">U</div>
                        <div class="profile-name" id="profile-display-name">User Name</div>
                        <div class="profile-username" id="profile-username">
                            @username
                            <i class="fas fa-check-circle verified-badge"></i>
                        </div>
                        <div class="profile-bio" id="profile-bio">This is a sample bio. Click edit to change it.</div>
                        <div class="profile-status">
                            <div class="status-indicator online"></div>
                            <span id="profile-status-text">online</span>
                        </div>
                        <div class="profile-role" id="profile-role">Member</div>
                        <div class="profile-stats">
                            <div class="stat">
                                <div class="stat-value" id="posts-count">0</div>
                                <div class="stat-label">Posts</div>
                            </div>
                            <div class="stat">
                                <div class="stat-value" id="followers-count">0</div>
                                <div class="stat-label">Followers</div>
                            </div>
                            <div class="stat">
                                <div class="stat-value" id="following-count">0</div>
                                <div class="stat-label">Following</div>
                            </div>
                        </div>
                    </div>
                    <div class="profile-posts">
                        <div class="section-title">
                            <i class="fas fa-stream"></i>
                            <span>Posts</span>
                        </div>
                        <div id="user-posts-container">
                            <!-- User posts will be dynamically inserted here -->
                        </div>
                    </div>
                </div>
            </div>

            <!-- Settings Tab -->
            <div class="tab-content" id="settings-tab">
                <div class="settings-container">
                    <div class="settings-section">
                        <div class="settings-title">
                            <i class="fas fa-user-edit"></i>
                            <span>Edit Profile</span>
                        </div>
                        <div class="form-group">
                            <label class="form-label" for="edit-display-name">Display Name</label>
                            <input type="text" class="form-input" id="edit-display-name" placeholder="Your display name">
                        </div>
                        <div class="form-group">
                            <label class="form-label" for="edit-username">Username</label>
                            <input type="text" class="form-input" id="edit-username" placeholder="Your username">
                        </div>
                        <div class="form-group">
                            <label class="form-label" for="edit-bio">Bio</label>
                            <textarea class="form-textarea" id="edit-bio" placeholder="Tell something about yourself"></textarea>
                        </div>
                        <button class="save-button" id="save-profile">Save Changes</button>
                    </div>

                    <div class="settings-section">
                        <div class="settings-title">
                            <i class="fas fa-bell"></i>
                            <span>Notifications</span>
                        </div>
                        <div class="form-group">
                            <label class="form-label">
                                <input type="checkbox" id="message-notifications" checked>
                                Message notifications
                            </label>
                        </div>
                        <div class="form-group">
                            <label class="form-label">
                                <input type="checkbox" id="post-notifications" checked>
                                Post notifications
                            </label>
                        </div>
                    </div>

                    <div class="settings-section">
                        <div class="settings-title">
                            <i class="fas fa-palette"></i>
                            <span>Appearance</span>
                        </div>
                        <div class="form-group">
                            <label class="form-label">Theme</label>
                            <select class="form-input" id="theme-select">
                                <option value="dark">Dark</option>
                                <option value="light">Light</option>
                                <option value="auto">System</option>
                            </select>
                        </div>
                    </div>
                </div>
            </div>
        </div>

        <!-- Bottom Navigation -->
        <div class="bottom-nav">
            <div class="nav-item active" data-tab="home">
                <div class="nav-icon"><i class="fas fa-home"></i></div>
                <div>Home</div>
            </div>
            <div class="nav-item" data-tab="chats">
                <div class="nav-icon"><i class="fas fa-comments"></i></div>
                <div>Chats</div>
            </div>
            <div class="nav-item" data-tab="profile">
                <div class="nav-icon"><i class="fas fa-user"></i></div>
                <div>Profile</div>
            </div>
            <div class="nav-item" data-tab="settings">
                <div class="nav-icon"><i class="fas fa-cog"></i></div>
                <div>Settings</div>
            </div>
        </div>

        <!-- Create Post Modal -->
        <div class="modal" id="create-post-modal">
            <div class="modal-content">
                <div class="modal-header">
                    <div class="modal-title">Create Post</div>
                    <button class="modal-close" id="close-create-post-modal">
                        <i class="fas fa-times"></i>
                    </button>
                </div>
                <div class="modal-body">
                    <div class="form-group">
                        <textarea class="form-textarea" id="post-content" placeholder="What's on your mind?" rows="5"></textarea>
                    </div>
                </div>
                <div class="modal-actions">
                    <button class="modal-button secondary" id="cancel-post">Cancel</button>
                    <button class="modal-button primary" id="publish-post">Publish</button>
                </div>
            </div>
        </div>

        <!-- NFT Notification Modal -->
        <div class="modal" id="nft-modal">
            <div class="modal-content">
                <div class="modal-header">
                    <div class="modal-title">Username NFTs</div>
                    <button class="modal-close" id="close-nft-modal">
                        <i class="fas fa-times"></i>
                    </button>
                </div>
                <div class="modal-body">
                    <p class="modal-text">
                        In the future, usernames can be turned into collectible NFTs and sold for the project's internal cryptocurrency.
                        Changing your username now will reserve it for potential future NFT conversion.
                    </p>
                </div>
                <div class="modal-actions">
                    <button class="modal-button primary" id="confirm-username-change">I Understand</button>
                </div>
            </div>
        </div>

        <!-- Notification Toast -->
        <div class="notification" id="notification">
            <div class="notification-icon">
                <i class="fas fa-info-circle"></i>
            </div>
            <div class="notification-content">
                <div class="notification-title" id="notification-title">Information</div>
                <div class="notification-message" id="notification-message">This is a notification message.</div>
            </div>
            <button class="notification-close" id="close-notification">
                <i class="fas fa-times"></i>
            </button>
        </div>
    </div>

    <script>
        // Quantum Messenger Application
        class QuantumMessenger {
            constructor() {
                this.state = {
                    currentUser: null,
                    currentTab: 'home',
                    users: [],
                    posts: [],
                    chats: [],
                    currentChat: null,
                    settings: {
                        theme: 'dark',
                        messageNotifications: true,
                        postNotifications: true
                    }
                };

                this.init();
            }

            init() {
                this.loadData();
                this.setupEventListeners();
                this.renderCurrentTab();
                this.showNotification('Welcome to Quantum Messenger!', 'info');
            }

            loadData() {
                // Try to load from localStorage
                const savedData = localStorage.getItem('quantum-data');
                
                if (savedData) {
                    const data = JSON.parse(savedData);
                    this.state.users = data.users || [];
                    this.state.posts = data.posts || [];
                    this.state.chats = data.chats || [];
                    this.state.settings = data.settings || this.state.settings;
                    
                    // Find current user
                    const currentUserId = localStorage.getItem('quantum-current-user');
                    if (currentUserId) {
                        this.state.currentUser = this.state.users.find(user => user.id === parseInt(currentUserId)) || this.createNewUser();
                    } else {
                        this.state.currentUser = this.createNewUser();
                    }
                } else {
                    // Initialize with default data
                    this.initializeDefaultData();
                }
                
                this.saveData();
            }

            initializeDefaultData() {
                // Create default users
                this.state.users = [
                    {
                        id: 1,
                        username: 'clanffys',
                        displayName: 'Alexey Clanffys',
                        bio: 'Creator of Quantum Messenger. Building the future of communication.',
                        avatar: 'A',
                        isVerified: true,
                        role: 'Project Creator',
                        isOnline: true,
                        followers: [2, 3],
                        following: [2, 3],
                        joinedDate: new Date('2023-01-15').toISOString()
                    },
                    {
                        id: 2,
                        username: 'johndoe',
                        displayName: 'John Doe',
                        bio: 'Digital enthusiast and tech lover. Always exploring new possibilities.',
                        avatar: 'J',
                        isVerified: false,
                        isOnline: false,
                        lastSeen: new Date(Date.now() - 3600000).toISOString(),
                        followers: [1],
                        following: [1, 3],
                        joinedDate: new Date('2023-03-10').toISOString()
                    },
                    {
                        id: 3,
                        username: 'janedoe',
                        displayName: 'Jane Doe',
                        bio: 'Tech enthusiast and digital creator. Love building amazing products.',
                        avatar: 'J',
                        isVerified: false,
                        isOnline: true,
                        followers: [1, 2],
                        following: [1],
                        joinedDate: new Date('2023-02-20').toISOString()
                    }
                ];
                
                // Create default posts
                this.state.posts = [
                    {
                        id: 1,
                        userId: 1,
                        content: 'Welcome to Quantum Messenger! This is the beginning of something amazing. We are building the future of communication with privacy and user experience at its core.',
                        timestamp: new Date().toISOString(),
                        likes: [2, 3],
                        comments: [
                            { id: 1, userId: 2, content: 'Looks great! Can\'t wait to see what you build next.', timestamp: new Date().toISOString() },
                            { id: 2, userId: 3, content: 'Excited to try it out! The design is beautiful.', timestamp: new Date().toISOString() }
                        ]
                    },
                    {
                        id: 2,
                        userId: 2,
                        content: 'Just discovered this new messenger. The interface is sleek and intuitive! Love the attention to detail in the design.',
                        timestamp: new Date(Date.now() - 3600000).toISOString(),
                        likes: [1],
                        comments: []
                    },
                    {
                        id: 3,
                        userId: 3,
                        content: 'The future of messaging is here! Quantum combines the best of Telegram and VK with a fresh approach. Well done team!',
                        timestamp: new Date(Date.now() - 7200000).toISOString(),
                        likes: [1, 2],
                        comments: [
                            { id: 3, userId: 1, content: 'Thank you for the kind words! We have many exciting features in the pipeline.', timestamp: new Date(Date.now() - 3600000).toISOString() }
                        ]
                    }
                ];
                
                // Create default chats
                this.state.chats = [
                    {
                        id: 1,
                        participants: [1, 2],
                        messages: [
                            { id: 1, senderId: 1, content: 'Hi John! Welcome to Quantum.', timestamp: new Date(Date.now() - 7200000).toISOString() },
                            { id: 2, senderId: 2, content: 'Thanks Alexey! The app looks amazing. The design is so clean and intuitive.', timestamp: new Date(Date.now() - 3600000).toISOString() },
                            { id: 3, senderId: 1, content: 'Glad you like it! We have many exciting features planned for the future.', timestamp: new Date(Date.now() - 1800000).toISOString() },
                            { id: 4, senderId: 2, content: 'Looking forward to seeing them. The NFT username concept is particularly interesting!', timestamp: new Date(Date.now() - 1200000).toISOString() }
                        ]
                    },
                    {
                        id: 2,
                        participants: [1, 3],
                        messages: [
                            { id: 1, senderId: 3, content: 'Hello! Is this the new messenger everyone is talking about?', timestamp: new Date(Date.now() - 5400000).toISOString() },
                            { id: 2, senderId: 1, content: 'Yes, welcome to Quantum! We\'re excited to have you here.', timestamp: new Date(Date.now() - 4800000).toISOString() },
                            { id: 3, senderId: 3, content: 'The interface is beautiful. I love the gradient accents and smooth animations.', timestamp: new Date(Date.now() - 4200000).toISOString() }
                        ]
                    },
                    {
                        id: 3,
                        participants: [2, 3],
                        messages: [
                            { id: 1, senderId: 2, content: 'Hey Jane, have you tried the new Quantum messenger?', timestamp: new Date(Date.now() - 6000000).toISOString() },
                            { id: 2, senderId: 3, content: 'Yes! It\'s fantastic. The design is so much better than other messengers.', timestamp: new Date(Date.now() - 5700000).toISOString() },
                            { id: 3, senderId: 2, content: 'I agree. The dark theme is easy on the eyes and the navigation is intuitive.', timestamp: new Date(Date.now() - 5400000).toISOString() }
                        ]
                    }
                ];
                
                // Create current user
                this.state.currentUser = this.createNewUser();
            }

            createNewUser() {
                // Generate a random user ID
                const newUserId = Math.max(...this.state.users.map(u => u.id), 0) + 1;
                
                // Generate a random username and display name
                const randomNames = [
                    { username: 'quantum_user', displayName: 'Quantum User' },
                    { username: 'digital_nomad', displayName: 'Digital Nomad' },
                    { username: 'tech_enthusiast', displayName: 'Tech Enthusiast' },
                    { username: 'future_builder', displayName: 'Future Builder' },
                    { username: 'code_explorer', displayName: 'Code Explorer' }
                ];
                
                const randomName = randomNames[Math.floor(Math.random() * randomNames.length)];
                
                const newUser = {
                    id: newUserId,
                    username: randomName.username,
                    displayName: randomName.displayName,
                    bio: 'New to Quantum Messenger. Excited to explore!',
                    avatar: randomName.displayName.charAt(0),
                    isVerified: false,
                    isOnline: true,
                    followers: [],
                    following: [1], // Follow the creator by default
                    joinedDate: new Date().toISOString()
                };
                
                this.state.users.push(newUser);
                return newUser;
            }

            saveData() {
                const data = {
                    users: this.state.users,
                    posts: this.state.posts,
                    chats: this.state.chats,
                    settings: this.state.settings
                };
                
                localStorage.setItem('quantum-data', JSON.stringify(data));
                localStorage.setItem('quantum-current-user', this.state.currentUser.id.toString());
            }

            setupEventListeners() {
                // Navigation
                document.querySelectorAll('.nav-item').forEach(item => {
                    item.addEventListener('click', () => {
                        const tab = item.getAttribute('data-tab');
                        this.switchTab(tab);
                    });
                });

                // Back to chats button
                document.getElementById('back-to-chats').addEventListener('click', () => {
                    this.switchTab('chats');
                });

                // Create post triggers
                document.getElementById('create-post-trigger').addEventListener('click', () => {
                    this.openCreatePostModal();
                });

                // Modal controls
                document.getElementById('close-create-post-modal').addEventListener('click', () => {
                    this.closeCreatePostModal();
                });

                document.getElementById('cancel-post').addEventListener('click', () => {
                    this.closeCreatePostModal();
                });

                document.getElementById('publish-post').addEventListener('click', () => {
                    this.publishPost();
                });

                // Message sending
                document.getElementById('send-message').addEventListener('click', () => {
                    this.sendMessage();
                });

                document.getElementById('message-input').addEventListener('keypress', (e) => {
                    if (e.key === 'Enter' && !e.shiftKey) {
                        e.preventDefault();
                        this.sendMessage();
                    }
                });

                // Profile saving
                document.getElementById('save-profile').addEventListener('click', () => {
                    this.saveProfile();
                });

                // NFT modal
                document.getElementById('close-nft-modal').addEventListener('click', () => {
                    this.closeNftModal();
                });

                document.getElementById('confirm-username-change').addEventListener('click', () => {
                    this.closeNftModal();
                });

                // Notification close
                document.getElementById('close-notification').addEventListener('click', () => {
                    this.hideNotification();
                });

                // Settings changes
                document.getElementById('theme-select').addEventListener('change', (e) => {
                    this.changeTheme(e.target.value);
                });

                document.getElementById('message-notifications').addEventListener('change', (e) => {
                    this.toggleMessageNotifications(e.target.checked);
                });

                document.getElementById('post-notifications').addEventListener('change', (e) => {
                    this.togglePostNotifications(e.target.checked);
                });

                // Username change detection for NFT modal
                document.getElementById('edit-username').addEventListener('focus', () => {
                    this.originalUsername = document.getElementById('edit-username').value;
                });

                document.getElementById('edit-username').addEventListener('blur', () => {
                    const newUsername = document.getElementById('edit-username').value;
                    if (this.originalUsername && newUsername !== this.originalUsername) {
                        this.showNftModal();
                    }
                });
            }

            switchTab(tab) {
                // Update navigation
                document.querySelectorAll('.nav-item').forEach(item => {
                    if (item.getAttribute('data-tab') === tab) {
                        item.classList.add('active');
                    } else {
                        item.classList.remove('active');
                    }
                });

                // Hide all tab contents
                document.querySelectorAll('.tab-content').forEach(content => {
                    content.classList.remove('active');
                });

                // Show selected tab content
                document.getElementById(`${tab}-tab`).classList.add('active');

                // Update header text
                document.getElementById('header-text').textContent = this.getHeaderText(tab);

                // Update state
                this.state.currentTab = tab;

                // Render specific content
                switch(tab) {
                    case 'home':
                        this.renderHome();
                        break;
                    case 'chats':
                        this.renderChats();
                        break;
                    case 'profile':
                        this.renderProfile(this.state.currentUser.id);
                        break;
                    case 'settings':
                        this.renderSettings();
                        break;
                }
            }

            getHeaderText(tab) {
                switch(tab) {
                    case 'home': return 'Home';
                    case 'chats': return this.state.currentChat ? this.getUser(this.state.currentChat.participants.find(id => id !== this.state.currentUser.id)).displayName : 'Chats';
                    case 'profile': return 'Profile';
                    case 'settings': return 'Settings';
                    default: return 'Quantum';
                }
            }

            renderHome() {
                const postsContainer = document.getElementById('posts-container');
                postsContainer.innerHTML = '';

                // Update current user avatar
                document.getElementById('current-user-avatar').textContent = this.state.currentUser.avatar;

                // Sort posts by timestamp (newest first)
                const sortedPosts = [...this.state.posts].sort((a, b) => new Date(b.timestamp) - new Date(a.timestamp));

                if (sortedPosts.length === 0) {
                    postsContainer.innerHTML = `
                        <div class="post">
                            <div class="post-content text-center">
                                No posts yet. Be the first to post something!
                            </div>
                        </div>
                    `;
                    return;
                }

                sortedPosts.forEach(post => {
                    const user = this.getUser(post.userId);
                    const postElement = document.createElement('div');
                    postElement.className = 'post';
                    
                    const isLiked = post.likes.includes(this.state.currentUser.id);
                    
                    postElement.innerHTML = `
                        <div class="post-header">
                            <div class="avatar" onclick="app.renderProfile(${user.id})">${user.avatar}</div>
                            <div class="user-info">
                                <div class="user-display-name" onclick="app.renderProfile(${user.id})">
                                    ${user.displayName}
                                    ${user.isVerified ? '<i class="fas fa-check-circle verified-badge"></i>' : ''}
                                </div>
                                <div class="user-username">@${user.username} 61 ${this.formatTime(post.timestamp)}</div>
                            </div>
                        </div>
                        <div class="post-content">${post.content}</div>
                        <div class="post-actions">
                            <button class="action-btn ${isLiked ? 'active' : ''}" onclick="app.toggleLike(${post.id})">
                                <i class="fas fa-heart"></i> <span>${post.likes.length}</span>
                            </button>
                            <button class="action-btn" onclick="app.toggleComments(${post.id})">
                                <i class="fas fa-comment"></i> <span>${post.comments.length}</span>
                            </button>
                            <button class="action-btn">
                                <i class="fas fa-share"></i> <span>Share</span>
                            </button>
                        </div>
                    `;
                    
                    postsContainer.appendChild(postElement);
                });
            }

            renderChats() {
                const chatsList = document.getElementById('chats-list');
                chatsList.innerHTML = '';

                // Hide chat view, show chats list
                document.getElementById('chat-view').classList.remove('active');
                document.getElementById('chats-tab').classList.add('active');

                this.state.chats.forEach(chat => {
                    const otherUserId = chat.participants.find(id => id !== this.state.currentUser.id);
                    const user = this.getUser(otherUserId);
                    const lastMessage = chat.messages[chat.messages.length - 1];
                    
                    const chatItem = document.createElement('li');
                    chatItem.className = 'chat-item';
                    chatItem.onclick = () => this.openChat(chat.id);
                    
                    chatItem.innerHTML = `
                        <div class="chat-avatar">${user.avatar}</div>
                        <div class="chat-info">
                            <div class="chat-header">
                                <div class="chat-name">${user.displayName}</div>
                                <div class="chat-time">${lastMessage ? this.formatTime(lastMessage.timestamp) : ''}</div>
                            </div>
                            <div class="chat-last-message">${lastMessage ? lastMessage.content : 'No messages yet'}</div>
                        </div>
                        <div class="chat-meta">
                            ${user.isOnline ? '<div class="chat-online"></div>' : ''}
                        </div>
                    `;
                    
                    chatsList.appendChild(chatItem);
                });
            }

            openChat(chatId) {
                this.state.currentChat = this.state.chats.find(chat => chat.id === chatId);
                
                // Hide chats list, show chat view
                document.getElementById('chats-tab').classList.remove('active');
                document.getElementById('chat-view').classList.add('active');
                
                this.renderChat();
            }

            renderChat() {
                const otherUserId = this.state.currentChat.participants.find(id => id !== this.state.currentUser.id);
                const user = this.getUser(otherUserId);
                const messagesContainer = document.getElementById('chat-messages');
                
                // Update chat header
                document.getElementById('chat-user-avatar').textContent = user.avatar;
                document.getElementById('chat-user-name').innerHTML = `
                    ${user.displayName}
                    ${user.isVerified ? '<i class="fas fa-check-circle verified-badge"></i>' : ''}
                `;
                document.getElementById('chat-user-status').textContent = user.isOnline ? 'online' : `last seen ${this.formatTime(user.lastSeen)}`;
                
                // Clear messages
                messagesContainer.innerHTML = '';
                
                // Add messages
                this.state.currentChat.messages.forEach(message => {
                    const messageElement = document.createElement('div');
                    messageElement.className = `message ${message.senderId === this.state.currentUser.id ? 'own' : ''}`;
                    
                    messageElement.innerHTML = `
                        <div class="message-bubble">
                            <div class="message-content">${message.content}</div>
                            <div class="message-time">${this.formatTime(message.timestamp)}</div>
                        </div>
                    `;
                    
                    messagesContainer.appendChild(messageElement);
                });
                
                // Scroll to bottom
                setTimeout(() => {
                    messagesContainer.scrollTop = messagesContainer.scrollHeight;
                }, 100);
                
                // Update header
                document.getElementById('header-text').textContent = user.displayName;
            }

            sendMessage() {
                const input = document.getElementById('message-input');
                const content = input.value.trim();
                
                if (content) {
                    const newMessage = {
                        id: Date.now(),
                        senderId: this.state.currentUser.id,
                        content: content,
                        timestamp: new Date().toISOString()
                    };
                    
                    this.state.currentChat.messages.push(newMessage);
                    this.saveData();
                    this.renderChat();
                    input.value = '';
                }
            }

            renderProfile(userId) {
                const user = this.getUser(userId);
                const isOwnProfile = userId === this.state.currentUser.id;
                
                // Update profile header
                document.getElementById('profile-avatar-large').textContent = user.avatar;
                document.getElementById('profile-display-name').textContent = user.displayName;
                document.getElementById('profile-username').innerHTML = `
                    @${user.username}
                    ${user.isVerified ? '<i class="fas fa-check-circle verified-badge"></i>' : ''}
                `;
                document.getElementById('profile-bio').textContent = user.bio;
                document.getElementById('profile-status-text').textContent = user.isOnline ? 'online' : 'offline';
                document.getElementById('profile-role').textContent = user.role || 'Member';
                
                // Update stats
                const userPosts = this.state.posts.filter(post => post.userId === userId);
                document.getElementById('posts-count').textContent = userPosts.length;
                document.getElementById('followers-count').textContent = user.followers ? user.followers.length : 0;
                document.getElementById('following-count').textContent = user.following ? user.following.length : 0;
                
                // Render user posts
                const userPostsContainer = document.getElementById('user-posts-container');
                userPostsContainer.innerHTML = '';
                
                if (userPosts.length === 0) {
                    userPostsContainer.innerHTML = `
                        <div class="post">
                            <div class="post-content text-center">
                                No posts yet.
                            </div>
                        </div>
                    `;
                } else {
                    userPosts.forEach(post => {
                        const postElement = document.createElement('div');
                        postElement.className = 'post';
                        
                        const isLiked = post.likes.includes(this.state.currentUser.id);
                        
                        postElement.innerHTML = `
                            <div class="post-content">${post.content}</div>
                            <div class="post-actions">
                                <button class="action-btn ${isLiked ? 'active' : ''}" onclick="app.toggleLike(${post.id})">
                                    <i class="fas fa-heart"></i> <span>${post.likes.length}</span>
                                </button>
                                <button class="action-btn" onclick="app.toggleComments(${post.id})">
                                    <i class="fas fa-comment"></i> <span>${post.comments.length}</span>
                                </button>
                                ${isOwnProfile ? `<button class="action-btn" onclick="app.deletePost(${post.id})"><i class="fas fa-trash"></i></button>` : ''}
                            </div>
                        `;
                        
                        userPostsContainer.appendChild(postElement);
                    });
                }
                
                // Switch to profile tab if viewing own profile
                if (isOwnProfile) {
                    this.switchTab('profile');
                }
            }

            renderSettings() {
                // Pre-fill form with current user data
                document.getElementById('edit-display-name').value = this.state.currentUser.displayName;
                document.getElementById('edit-username').value = this.state.currentUser.username;
                document.getElementById('edit-bio').value = this.state.currentUser.bio;
                
                // Pre-fill settings
                document.getElementById('theme-select').value = this.state.settings.theme;
                document.getElementById('message-notifications').checked = this.state.settings.messageNotifications;
                document.getElementById('post-notifications').checked = this.state.settings.postNotifications;
            }

            openCreatePostModal() {
                document.getElementById('create-post-modal').classList.add('active');
            }

            closeCreatePostModal() {
                document.getElementById('create-post-modal').classList.remove('active');
                document.getElementById('post-content').value = '';
            }

            publishPost() {
                const content = document.getElementById('post-content').value.trim();
                
                if (content) {
                    const newPost = {
                        id: Date.now(),
                        userId: this.state.currentUser.id,
                        content: content,
                        timestamp: new Date().toISOString(),
                        likes: [],
                        comments: []
                    };
                    
                    this.state.posts.push(newPost);
                    this.saveData();
                    this.closeCreatePostModal();
                    this.renderHome();
                    this.showNotification('Your post has been published!', 'success');
                }
            }

            saveProfile() {
                const displayName = document.getElementById('edit-display-name').value.trim();
                const username = document.getElementById('edit-username').value.trim();
                const bio = document.getElementById('edit-bio').value.trim();
                
                // Validate inputs
                if (!displayName || !username) {
                    this.showNotification('Display name and username are required', 'error');
                    return;
                }
                
                // Check if username is available (if changed)
                if (username !== this.state.currentUser.username) {
                    const usernameExists = this.state.users.some(user => 
                        user.username === username && user.id !== this.state.currentUser.id
                    );
                    
                    if (usernameExists) {
                        this.showNotification('Username is already taken. Please choose another one.', 'error');
                        return;
                    }
                }
                
                // Update user
                this.state.currentUser.displayName = displayName;
                this.state.currentUser.username = username;
                this.state.currentUser.bio = bio;
                this.state.currentUser.avatar = displayName.charAt(0);
                
                // Update in users array
                const userIndex = this.state.users.findIndex(user => user.id === this.state.currentUser.id);
                if (userIndex !== -1) {
                    this.state.users[userIndex] = this.state.currentUser;
                }
                
                this.saveData();
                this.renderProfile(this.state.currentUser.id);
                this.showNotification('Profile updated successfully!', 'success');
            }

            toggleLike(postId) {
                const post = this.state.posts.find(p => p.id === postId);
                const likeIndex = post.likes.indexOf(this.state.currentUser.id);
                
                if (likeIndex === -1) {
                    post.likes.push(this.state.currentUser.id);
                } else {
                    post.likes.splice(likeIndex, 1);
                }
                
                this.saveData();
                
                // Re-render current view
                if (this.state.currentTab === 'home') {
                    this.renderHome();
                } else if (this.state.currentTab === 'profile') {
                    this.renderProfile(this.state.currentUser.id);
                }
            }

            deletePost(postId) {
                this.state.posts = this.state.posts.filter(p => p.id !== postId);
                this.saveData();
                this.renderProfile(this.state.currentUser.id);
                this.showNotification('Post deleted successfully', 'success');
            }

            toggleComments(postId) {
                // In a full implementation, this would open a comments view
                this.showNotification('Comments functionality will be implemented in the next update', 'info');
            }

            showNftModal() {
                document.getElementById('nft-modal').classList.add('active');
            }

            closeNftModal() {
                document.getElementById('nft-modal').classList.remove('active');
            }

            changeTheme(theme) {
                this.state.settings.theme = theme;
                this.saveData();
                
                // In a full implementation, this would change the actual theme
                this.showNotification(`Theme changed to ${theme} mode`, 'success');
            }

            toggleMessageNotifications(enabled) {
                this.state.settings.messageNotifications = enabled;
                this.saveData();
            }

            togglePostNotifications(enabled) {
                this.state.settings.postNotifications = enabled;
                this.saveData();
            }

            showNotification(message, type = 'info') {
                const notification = document.getElementById('notification');
                const title = document.getElementById('notification-title');
                const messageEl = document.getElementById('notification-message');
                
                // Set notification type
                const icons = {
                    info: 'info-circle',
                    success: 'check-circle',
                    warning: 'exclamation-triangle',
                    error: 'exclamation-circle'
                };
                
                const colors = {
                    info: '#3390ec',
                    success: '#4caf50',
                    warning: '#ff9800',
                    error: '#f44336'
                };
                
                notification.querySelector('.notification-icon i').className = `fas fa-${icons[type]}`;
                notification.style.borderLeftColor = colors[type];
                
                // Set content
                title.textContent = type.charAt(0).toUpperCase() + type.slice(1);
                messageEl.textContent = message;
                
                // Show notification
                notification.classList.add('show');
                
                // Auto hide after 5 seconds
                setTimeout(() => {
                    this.hideNotification();
                }, 5000);
            }

            hideNotification() {
                document.getElementById('notification').classList.remove('show');
            }

            // Utility methods
            getUser(userId) {
                return this.state.users.find(user => user.id === userId) || this.state.currentUser;
            }

            formatTime(timestamp) {
                if (!timestamp) return 'unknown';
                
                const date = new Date(timestamp);
                const now = new Date();
                const diffMs = now - date;
                const diffMins = Math.floor(diffMs / 60000);
                const diffHours = Math.floor(diffMs / 3600000);
                const diffDays = Math.floor(diffMs / 86400000);
                
                if (diffMins < 1) return 'just now';
                if (diffMins < 60) return `${diffMins}m ago`;
                if (diffHours < 24) return `${diffHours}h ago`;
                if (diffDays < 7) return `${diffDays}d ago`;
                
                return date.toLocaleDateString();
            }
        }

        // Initialize the application
        const app = new QuantumMessenger();
    </script>
</body>
</html>
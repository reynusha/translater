<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Collectible Gifts</title>
    <style>
        :root {
            --tg-theme-bg-color: #1e1e1e;
            --tg-theme-text-color: #ffffff;
            --tg-theme-hint-color: #aaaaaa;
            --tg-theme-link-color: #3390ec;
            --tg-theme-button-color: #3390ec;
            --tg-theme-button-text-color: #ffffff;
            --tg-theme-secondary-bg-color: #2d2d2d;
        }

        * {
            margin: 0;
            padding: 0;
            box-sizing: border-box;
            font-family: -apple-system, BlinkMacSystemFont, 'Segoe UI', Roboto, Oxygen, Ubuntu, Cantarell, sans-serif;
        }

        body {
            background: var(--tg-theme-bg-color);
            color: var(--tg-theme-text-color);
            line-height: 1.5;
        }

        .container {
            max-width: 100%;
            padding: 16px;
        }

        .header {
            text-align: center;
            padding: 20px 0;
            border-bottom: 1px solid #333;
            margin-bottom: 20px;
        }

        .header h1 {
            font-size: 24px;
            font-weight: 600;
        }

        .nav-tabs {
            display: flex;
            justify-content: space-around;
            margin-bottom: 20px;
            border-bottom: 1px solid #333;
        }

        .nav-tab {
            padding: 12px 0;
            flex: 1;
            text-align: center;
            cursor: pointer;
            font-weight: 500;
            color: var(--tg-theme-hint-color);
            transition: all 0.2s;
            border-bottom: 2px solid transparent;
        }

        .nav-tab.active {
            color: var(--tg-theme-text-color);
            border-bottom: 2px solid var(--tg-theme-button-color);
        }

        .section {
            display: none;
        }

        .section.active {
            display: block;
        }

        .gifts-grid {
            display: grid;
            gap: 16px;
            grid-template-columns: 1fr;
        }

        .gift-card {
            background: var(--tg-theme-secondary-bg-color);
            border-radius: 16px;
            padding: 16px;
            border: 1px solid #333;
        }

        .gift-image {
            width: 100%;
            height: 200px;
            object-fit: cover;
            border-radius: 12px;
            margin-bottom: 12px;
            background: linear-gradient(135deg, #667eea 0%, #764ba2 100%);
        }

        .gift-name {
            font-size: 18px;
            font-weight: 600;
            margin-bottom: 8px;
        }

        .gift-details {
            display: flex;
            justify-content: space-between;
            align-items: center;
            margin-bottom: 12px;
            font-size: 14px;
            color: var(--tg-theme-hint-color);
        }

        .gift-price {
            display: flex;
            align-items: center;
            font-weight: 600;
            color: #ffd700;
            font-size: 16px;
        }

        .buy-button {
            background: var(--tg-theme-button-color);
            color: var(--tg-theme-button-text-color);
            border: none;
            border-radius: 12px;
            padding: 12px 20px;
            width: 100%;
            font-weight: 600;
            cursor: pointer;
            transition: all 0.2s;
            font-size: 16px;
        }

        .buy-button:hover {
            opacity: 0.9;
        }

        .buy-button:disabled {
            opacity: 0.5;
            cursor: not-allowed;
        }

        .sold-out-badge {
            background: #ff4757;
            color: white;
            padding: 8px 12px;
            border-radius: 8px;
            font-size: 14px;
            font-weight: 600;
            text-align: center;
            margin-top: 8px;
        }

        .profile-header {
            display: flex;
            align-items: center;
            margin-bottom: 24px;
            padding: 16px;
            background: var(--tg-theme-secondary-bg-color);
            border-radius: 16px;
        }

        .avatar {
            width: 64px;
            height: 64px;
            border-radius: 50%;
            background: linear-gradient(135deg, #667eea 0%, #764ba2 100%);
            margin-right: 16px;
        }

        .profile-info h2 {
            font-size: 18px;
            margin-bottom: 4px;
        }

        .profile-info p {
            color: var(--tg-theme-hint-color);
            font-size: 14px;
        }

        .owned-gifts {
            margin-top: 20px;
        }

        .owned-gifts h3 {
            margin-bottom: 16px;
            font-size: 18px;
        }

        .owned-gifts-grid {
            display: grid;
            grid-template-columns: repeat(2, 1fr);
            gap: 12px;
        }

        .owned-gift-card {
            background: var(--tg-theme-secondary-bg-color);
            border-radius: 12px;
            padding: 12px;
            text-align: center;
            border: 1px solid #333;
        }

        .owned-gift-image {
            width: 100%;
            height: 120px;
            object-fit: cover;
            border-radius: 8px;
            margin-bottom: 8px;
            background: linear-gradient(135deg, #667eea 0%, #764ba2 100%);
        }

        .owned-gift-name {
            font-size: 14px;
            margin-bottom: 4px;
            font-weight: 600;
        }

        .owned-gift-count {
            color: var(--tg-theme-hint-color);
            font-size: 12px;
        }

        .marketplace-message {
            text-align: center;
            padding: 40px 20px;
        }

        .marketplace-message h2 {
            font-size: 24px;
            margin-bottom: 16px;
            background: linear-gradient(135deg, #667eea 0%, #764ba2 100%);
            -webkit-background-clip: text;
            -webkit-text-fill-color: transparent;
            font-weight: 700;
        }

        .marketplace-message p {
            color: var(--tg-theme-hint-color);
            line-height: 1.6;
            font-size: 16px;
        }

        .section-title {
            font-size: 20px;
            margin-bottom: 16px;
            font-weight: 600;
        }

        .empty-state {
            text-align: center;
            padding: 40px 20px;
            color: var(--tg-theme-hint-color);
        }

        .stars-icon {
            display: inline-block;
            margin-right: 4px;
        }
    </style>
</head>
<body>
    <div class="container">
        <div class="header">
            <h1>Collectible Gifts</h1>
        </div>

        <div class="nav-tabs">
            <div class="nav-tab active" data-tab="home">Home</div>
            <div class="nav-tab" data-tab="profile">Profile</div>
            <div class="nav-tab" data-tab="market">Market</div>
        </div>

        <!-- Home Section -->
        <div class="section active" id="home">
            <div class="section-title">Available Gifts</div>
            
            <div class="gifts-grid">
                <div class="gift-card" id="sculpture-card">
                    <img src="https://i.postimg.cc/jjKZKCz1/IMG-20250902-072312-313.jpg" alt="Sculpture" class="gift-image">
                    <div class="gift-name">Sculpture</div>
                    <div class="gift-details">
                        <span>Available: <span id="sculpture-available">550</span>/550</span>
                        <span class="gift-price"><span class="stars-icon">82</span>50</span>
                    </div>
                    <button class="buy-button" data-gift="sculpture" data-price="50">Buy Now</button>
                </div>

                <div class="gift-card" id="crystal-lion-card">
                    <img src="https://i.postimg.cc/ZK1hPkNx/kmc-20251004-221530.png" alt="Crystal Lion" class="gift-image">
                    <div class="gift-name">Crystal Lion</div>
                    <div class="gift-details">
                        <span>Available: <span id="crystal-lion-available">1000</span>/1000</span>
                        <span class="gift-price"><span class="stars-icon">82</span>25</span>
                    </div>
                    <button class="buy-button" data-gift="crystalLion" data-price="25">Buy Now</button>
                </div>

                <div class="gift-card" id="dollar-card">
                    <div class="gift-image" style="background: linear-gradient(135deg, #27ae60, #2ecc71);"></div>
                    <div class="gift-name">Dollar</div>
                    <div class="gift-details">
                        <span>Available: <span id="dollar-available">3000</span>/3000</span>
                        <span class="gift-price"><span class="stars-icon">82</span>5</span>
                    </div>
                    <button class="buy-button" data-gift="dollar" data-price="5">Buy Now</button>
                </div>
            </div>

            <div class="section-title" id="sold-out-title" style="display: none;">Sold Out</div>
            <div id="sold-out-container"></div>
        </div>

        <!-- Profile Section -->
        <div class="section" id="profile">
            <div class="profile-header">
                <div class="avatar"></div>
                <div class="profile-info">
                    <h2 id="username">@username</h2>
                    <p id="member-since">Member since: Loading...</p>
                </div>
            </div>

            <div class="owned-gifts">
                <h3>Your Collection</h3>
                <div class="owned-gifts-grid" id="owned-gifts-grid">
                    <div class="empty-state">No gifts purchased yet</div>
                </div>
            </div>
        </div>

        <!-- Market Section -->
        <div class="section" id="market">
            <div class="marketplace-message">
                <h2>Dreams Come True</h2>
                <p>Very soon, our marketplace will be launched where you can trade your collectible gifts. Buy and sell them freely. From that point, gift prices will be determined exclusively by the community.</p>
            </div>
        </div>
    </div>

    <script>
        // Initialize the app
        document.addEventListener('DOMContentLoaded', function() {
            // Gift data
            const gifts = {
                sculpture: {
                    name: 'Sculpture',
                    total: 550,
                    available: 550,
                    price: 50,
                    image: 'https://i.postimg.cc/jjKZKCz1/IMG-20250902-072312-313.jpg'
                },
                crystalLion: {
                    name: 'Crystal Lion',
                    total: 1000,
                    available: 1000,
                    price: 25,
                    image: 'https://i.postimg.cc/ZK1hPkNx/kmc-20251004-221530.png'
                },
                dollar: {
                    name: 'Dollar',
                    total: 3000,
                    available: 3000,
                    price: 5,
                    image: null
                }
            };

            // User data
            let userData = {
                username: 'user',
                memberSince: new Date(),
                ownedGifts: {
                    sculpture: 0,
                    crystalLion: 0,
                    dollar: 0
                }
            };

            // DOM elements
            const navTabs = document.querySelectorAll('.nav-tab');
            const sections = document.querySelectorAll('.section');
            const buyButtons = document.querySelectorAll('.buy-button');
            const usernameElement = document.getElementById('username');
            const memberSinceElement = document.getElementById('member-since');
            const ownedGiftsGrid = document.getElementById('owned-gifts-grid');
            const soldOutContainer = document.getElementById('sold-out-container');
            const soldOutTitle = document.getElementById('sold-out-title');

            // Load user data from localStorage
            function loadUserData() {
                const savedData = localStorage.getItem('collectibleGiftsUserData');
                if (savedData) {
                    const parsedData = JSON.parse(savedData);
                    userData = {
                        ...userData,
                        ...parsedData,
                        memberSince: new Date(parsedData.memberSince)
                    };
                }
                
                // Update UI with user data
                usernameElement.textContent = '@' + userData.username;
                const daysSince = Math.floor((new Date() - userData.memberSince) / (1000 * 60 * 60 * 24));
                memberSinceElement.textContent = `Member for ${daysSince} days`;
                
                updateOwnedGiftsDisplay();
                
                // Update gift availability
                updateGiftAvailability();
            }

            // Save user data to localStorage
            function saveUserData() {
                localStorage.setItem('collectibleGiftsUserData', JSON.stringify(userData));
            }

            // Update gift availability display
            function updateGiftAvailability() {
                for (const [giftId, gift] of Object.entries(gifts)) {
                    const availableElement = document.getElementById(`${giftId}-available`);
                    if (availableElement) {
                        availableElement.textContent = gift.available;
                    }
                    
                    // Disable button if sold out
                    if (gift.available === 0) {
                        const button = document.querySelector(`[data-gift="${giftId}"]`);
                        if (button) {
                            button.disabled = true;
                            button.textContent = 'Sold Out';
                            
                            // Move to sold out section
                            const card = document.getElementById(`${giftId}-card`);
                            if (card) {
                                soldOutTitle.style.display = 'block';
                                const soldOutBadge = document.createElement('div');
                                soldOutBadge.className = 'sold-out-badge';
                                soldOutBadge.textContent = 'SOLD OUT';
                                card.appendChild(soldOutBadge);
                                soldOutContainer.appendChild(card);
                            }
                        }
                    }
                }
            }

            // Update the display of owned gifts
            function updateOwnedGiftsDisplay() {
                ownedGiftsGrid.innerHTML = '';
                let hasGifts = false;
                
                for (const [giftId, count] of Object.entries(userData.ownedGifts)) {
                    if (count > 0) {
                        hasGifts = true;
                        const gift = gifts[giftId];
                        const giftCard = document.createElement('div');
                        giftCard.className = 'owned-gift-card';
                        
                        if (gift.image) {
                            giftCard.innerHTML = `
                                <img src="${gift.image}" alt="${gift.name}" class="owned-gift-image">
                                <div class="owned-gift-name">${gift.name}</div>
                                <div class="owned-gift-count">Owned: ${count}</div>
                            `;
                        } else {
                            giftCard.innerHTML = `
                                <div class="owned-gift-image" style="background: linear-gradient(135deg, #27ae60, #2ecc71);"></div>
                                <div class="owned-gift-name">${gift.name}</div>
                                <div class="owned-gift-count">Owned: ${count}</div>
                            `;
                        }
                        
                        ownedGiftsGrid.appendChild(giftCard);
                    }
                }
                
                if (!hasGifts) {
                    ownedGiftsGrid.innerHTML = '<div class="empty-state">No gifts purchased yet</div>';
                }
            }

            // Handle gift purchase
            function handlePurchase(giftId) {
                const gift = gifts[giftId];
                
                if (gift.available <= 0) {
                    alert(`Sorry, ${gift.name} is sold out.`);
                    return;
                }
                
                // Simple confirmation
                if (confirm(`Do you want to buy ${gift.name} for ${gift.price} Stars?`)) {
                    // Simulate successful purchase
                    gift.available--;
                    userData.ownedGifts[giftId]++;
                    
                    // Update UI
                    document.getElementById(`${giftId}-available`).textContent = gift.available;
                    
                    // Check if gift is sold out
                    if (gift.available === 0) {
                        const button = document.querySelector(`[data-gift="${giftId}"]`);
                        if (button) {
                            button.disabled = true;
                            button.textContent = 'Sold Out';
                            
                            // Move to sold out section
                            const card = document.getElementById(`${giftId}-card`);
                            if (card) {
                                soldOutTitle.style.display = 'block';
                                const soldOutBadge = document.createElement('div');
                                soldOutBadge.className = 'sold-out-badge';
                                soldOutBadge.textContent = 'SOLD OUT';
                                card.appendChild(soldOutBadge);
                                soldOutContainer.appendChild(card);
                            }
                        }
                    }
                    
                    updateOwnedGiftsDisplay();
                    saveUserData();
                    
                    alert(`You've successfully purchased ${gift.name}!`);
                }
            }

            // Set up navigation
            navTabs.forEach(tab => {
                tab.addEventListener('click', function() {
                    const tabId = this.getAttribute('data-tab');
                    
                    // Update active tab
                    navTabs.forEach(t => t.classList.remove('active'));
                    this.classList.add('active');
                    
                    // Show active section
                    sections.forEach(s => s.classList.remove('active'));
                    document.getElementById(tabId).classList.add('active');
                });
            });
            
            // Set up buy buttons
            buyButtons.forEach(button => {
                button.addEventListener('click', function() {
                    const giftId = this.getAttribute('data-gift');
                    handlePurchase(giftId);
                });
            });
            
            // Load initial data
            loadUserData();
        });
    </script>
</body>
</html>